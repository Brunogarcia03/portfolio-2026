---
import { getCollection } from "astro:content";

import Link from "./ui/Link.astro";

const fecha = new Date();
const posts = await getCollection("blog");
---

<section
  class="relative text-xs md:text-sm text-neutral-600 font-medium leading-5 max-[690px]:px-8 px-4 py-4 flex flex-col items-center justify-start gap-4"
>
  <svg
    data-direction="bottom"
    data-variant="full-screen"
    class="absolute pointer-events-none z-10 text-[#ddb3ff] dark:text-neutral-600 bottom-0 w-full"
    width="100%"
    height="1"
    viewBox="0 0 100 1"
    preserveAspectRatio="none"
    style="left:50%;transform:translateX(-50%);width:100vw"
    ><line
      x1="0"
      y1="0.5"
      x2="100"
      y2="0.5"
      stroke="currentColor"
      stroke-width="1"
      stroke-dasharray="6 6"
      vector-effect="non-scaling-stroke"></line></svg
  >
  <h2
    class="animate-reveal text-start w-full text-lg md:text-xl mb-4 text-neutral-800 dark:text-neutral-300"
  >
    Pensamientos
  </h2>
  {
    posts.slice(0, 5).map((post) => {
      const { slug, data } = post;
      const { titulo, descripcion } = data;

      return (
        <Link href={`blog/${slug}`} title={titulo} description={descripcion} />
      );
    })
  }
  <a href="/blog" class="flex items-center justify-between mt-4 group w-full">
    <span
      class="flex items-center gap-1 select-none font-mono z-20 bottom-3 bg-background left-3 text-sm py-0.5 px-1 animate-in fade-in slide-in-from-bottom-2 duration-300 text-neutral-600 dark:text-neutral-400"
    >
      Ver m√°s <svg
        class="size-4 shrink-0 text-neutral-300 dark:text-neutral-700 group-hover:text-neutral-700 dark:group-hover:text-neutral-300 group-focus-visible:text-neutral-700 dark:group-focus-visible:text-neutral-300 group-hover:rotate-45 transition-all duration-300 group-focus-visible:rotate-45"
        viewBox="0 0 24 24"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
        ><path
          d="M7 17L17 7M17 7H7M17 7V17"
          stroke="currentColor"
          stroke-width="2"
          stroke-linecap="round"
          stroke-linejoin="round"></path></svg
      >
    </span>
    <span
      class="select-none font-mono z-20 bottom-3 bg-background right-3 text-sm py-0.5 px-1 animate-in fade-in slide-in-from-bottom-2 duration-300 text-neutral-600 dark:text-neutral-400"
    >
      {
        fecha.toLocaleDateString("es-AR", {
          day: "2-digit",
          month: "2-digit",
          year: "numeric",
        })
      }
    </span>
  </a>
</section>
